/**********
     TITLE: Music Object Extension - Snapshots
   VERSION: 1.0.0
    AUTHOR: Chris van Rensburg
 COPYRIGHT: 2000-2001 Beatnik, Inc. All Rights Reserved
  REQUIRES: music-object.js (3.3.0 or higher)
**********/
function MO_xf_a(_a,_b){this._a=_a;this._b=_b;}function mo_getEntireGroupState(_c,_d){var _e='get'+_c+_d,_f=_c=='Channel'?16:64,_g=new Array();for(var _h=1;_h<=_f;_h++)_g[_h]=this[_e](_h);return _g;}function mo_setEntireGroupState(_c,_d,_g){var _i='set'+_c+_d,_f=_c=='Channel'?16:64;for(var _h=1;_h<=_f;_h++)this[_i](_h,_g[_h]);}function mo_isSnapshotDefined(_j){return typeof this.snapshots!='undefined'&&typeof this.snapshots[_j]!='undefined';}function mo_captureSnapshot(_j,_k){var _l=this;if(typeof _l.snapshots=='undefined')_l.snapshots=new Array();if(!_l.isSnapshotDefined(_j)){var _m=_l.snapshots[_j]=new Object();_m.controllers=new Array();_m.filter=new Array();_l.resetSnapshotFilter(_j,'OFF');_l.setSnapshotFilter(_j,_k);}else{if(typeof _k=='string')_l.setSnapshotFilter(_j,_k);}
_m.volume=_l.getVolume();_m.transpose=_l.getTranspose();_m.tempo=_l.getTempo();_m.position=_l.getPosition();_m.channelMute=_l.getEntireGroupState('Channel','Mute');_m.channelSolo=_l.getEntireGroupState('Channel','Solo');_m.trackMute=_l.getEntireGroupState('Track','Mute');_m.trackSolo=_l.getEntireGroupState('Track','Solo');for(var _n=0;_n<Music.controllers.length;_n++){var _o=Music.controllers[_n];if(typeof _m.controllers[_o._b]=='undefined')_m.controllers[_o._b]=new Array();var _p=_m.controllers[_o._b];for(var _q=1;_q<17;_q++)_p[_q]=_l.getController[_q,_o._a];}}function MO_xf_b(_r){_r=_r.toUpperCase();return _r=='TRUE'||_r=='ON'||_r=='1';}function mo_recallSnapshot(_j,_k){var _l=this;if(_l.isSnapshotDefined(_j)){if(typeof _k=='string')_l.setSnapshotFilter(_j,_k);var _m=_l.snapshots[_j],_s=_m.filter;if(MO_xf_b(_s.VOLUME)_l.setVolume(_m.volume);if(MO_xf_b(_s.TRANSPOSE)_l.setTranspose(_m.transpose);if(MO_xf_b(_s.TEMPO)_l.setTempo(_m.tempo);if(MO_xf_b(_s.POSITION)_l.setPosition(_m.position);
if(MO_xf_b(_s.CHANNELMUTE)_l.setEntireGroupState('Channel','Mute',_m.channelMute);if(MO_xf_b(_s.CHANNELSOLO)_l.setEntireGroupState('Channel','Solo',_m.channelSolo);if(MO_xf_b(_s.TRACKMUTE)_l.setEntireGroupState('Track','Mute',_m.trackMute);if(MO_xf_b(_s.TRACKSOLO)_l.setEntireGroupState('Track','Solo',_m.trackSolo);for(var _n=0;_n<Music.controllers.length;_n++){var _o=Music.controllers[_n];if(MO_xf_b(_s[_o._b]){var _p=_m.controllers[_o._b];for(var _q=1;_q<17;_q++)_l.setController[_q,_o._a,_p[_q]];}}}}function mo_removeSnapshot(_j){if(this.isSnapshotDefined(_j))this.snapshots[_j]=null;}function mo_getSnapshotFilter(_j){var _t='';if(this.isSnapshotDefined(_j)){var _m=this.snapshots[_j];for(var _u=0;_u<Music.snapshotFilterOptions.length;_u++){var _v=Music.snapshotFilterOptions[_u];_t+=((_t!='')?' ':'')+_v+'='+(_m.filter[_v]+'').toUpperCase();}}return _t;}function mo_setSnapshotFilter(_j,_k){if(this.isSnapshotDefined(_j)){
Music.parseAttributes((typeof _k=='string')?_k:Music.defaultSnapshotFilter,this.snapshots[_j].filter);}}function mo_resetSnapshotFilter(_j,_w){if(typeof _w=='undefined')_w='ON';if(this.isSnapshotDefined(_j)){_w=_w+'';var _m=this.snapshots[_j];for(var _u=0;_u<Music.snapshotFilterOptions.length;_u++)_m.filter[Music.snapshotFilterOptions[_u]]=_w;}}Music.addPublicInstanceMethods('captureSnapshot','getSnapshotFilter','isSnapshotDefined','recallSnapshot','removeSnapshot','resetSnapshotFilter','setSnapshotFilter');Music.addPrivateInstanceMethods('getEntireGroupState','setEntireGroupState');Music.defaultSnapshotFilter='CHANNELMUTE=ON CHANNELSOLO=ON CHANNELMODULATION=ON CHANNELVOLUME=ON CHANNELPAN=ON CHANNELEXPRESSION=ON CHANNELSUSTAIN=ON CHANNELREVERBTYPE=ON CHANNELREVERBLEVEL=ON CHANNELCHORUSLEVEL=ON POSITION=ON TEMPO=ON TRANSPOSE=ON VOLUME=ON';Music.controllers=new Array(new MO_xf_a(1,'CHANNELMODULATION'),new MO_xf_a(7,'CHANNELVOLUME'),new MO_xf_a(10,'CHANNELPAN'),new MO_xf_a(11,'CHANNELEXPRESSION'),
new MO_xf_a(64,'CHANNELSUSTAIN'),new MO_xf_a(90,'CHANNELREVERBTYPE'),new MO_xf_a(91,'CHANNELREVERBLEVEL'),new MO_xf_a(93,'CHANNELCHORUSLEVEL'));Music.snapshotFilterOptions=new Array('CHANNELMUTE','CHANNELSOLO','CHANNELMODULATION','CHANNELVOLUME','CHANNELPAN','CHANNELEXPRESSION','CHANNELSUSTAIN','CHANNELREVERBTYPE','CHANNELREVERBLEVEL','CHANNELCHORUSLEVEL','POSITION','TEMPO','TRANSPOSE','VOLUME');