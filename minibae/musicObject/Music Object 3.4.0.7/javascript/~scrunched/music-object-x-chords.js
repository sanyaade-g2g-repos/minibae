/**********
     TITLE: Music Object Extension - Chords
   VERSION: 1.1.0
    AUTHOR: Sal Orlando & Chris van Rensburg
 COPYRIGHT: 1996-2001 Beatnik, Inc. All Rights Reserved
  REQUIRES: music-object.js (3.3.0 or higher)
**********/
function MO_x2_a(_a,_b){return _a.charAt(_b).toLowerCase();}function MO_x2_b(_a,_b){return(_a.charAt(_b)=='#')?1:((_a.charAt(_b)=='b')? -1:0);}function MO_x2_c(_a,_b){return Math.abs(MO_x2_b(_a,_b));}function mo_getChordNotes(_c,_d,_e){var _f=false,_g=false,_h=new Array(Music.getNoteNumber(_c.charAt(0)),0,null,4,null,7,null,null,12,null,null,null,null,null),_b=1,_i=0,_j=(typeof _d=='number')?(_d*12):0;_h[0]+=MO_x2_b(_c,_b);_b+=MO_x2_c(_c,_b);if(MO_x2_a(_c,_b)=='m'){_f=true;_b++;_h[3]=3;var _k=MO_x2_a(_c,_b);if(_k=='a'||_k=='i')_b+=2;if(_k=='a')_h[3]++;}if(MO_x2_a(_c,_b)=='d'){_b++;_g=true;_h[3]=3;_h[5]=6;_h[8]=null;_b+=2;}_i+=MO_x2_b(_c,_b);_b+=MO_x2_c(_c,_b);if(_c.charAt(_b)=='7'){_h[7]=(_f?(_h[3]+7):10)+_i;if(_g)_h[7]--;_h[8]=null;_b++;_i=0;}if(MO_x2_a(_c,_b)=='s'){
_h[3]=null;_h[4]=5;_b+=3;if(_c.charAt(_b)=='2'){_h[4]=null;_h[2]=2;_b++;}else if(_c.charAt(_b)=='4')_b++;}_i+=MO_x2_b(_c,_b);_b+=MO_x2_c(_c,_b);if(_c.charAt(_b)=='9'){_h[7]=_f?(_h[3]+7):10;_h[9]=14+_i;_h[8]=null;_b++;_i=0;}_i+=MO_x2_b(_c,_b);_b+=MO_x2_c(_c,_b);if(_c.charAt(_b)=='1'){_b++;_h[8]=null;if(_h[7]!=null)_h[7]=_f?(7+_h[3]):10;_h[9]=14;_h[5]=null;if(MO_x2_a(_c,_b)=='1'){_h[11]=17+_i;_b++;}else if(MO_x2_a(_c,_b)=='3'){_h[13]=21+_i;_b++;}_i=0;}_i+=MO_x2_b(_c,_b);_b+=MO_x2_c(_c,_b);if(_c.charAt(_b)=='5'){_h[5]=7+_i;_b++;_i=0;}_i+=MO_x2_b(_c,_b);_b+=MO_x2_c(_c,_b);if(_c.charAt(_b)=='6'){_h[6]=5+_h[3]+_i;_b++;_i=0;}if(_c.charAt(_b)=='+')_h[5]=8;_h[1]=(((typeof _e=='string'&&_e!='')||typeof _e=='number')?Music.getNoteNumber(_e):_h[0])+_j;for(var _l=2;_l<_h.length;_l++){if(typeof _h[_l]=='number')_h[_l]+=_h[0]+_j;}_h[0]=null;return _h;}function mo_playNotes(_m,_n,_o,_p,_q,_r){var _s='',_t='this.playNote ('+_m+','+((typeof _n=='number'&&typeof _o=='number')?(_n+','+_o+','):''),
_u=','+((typeof _q=='number')?_q:127)+','+((typeof _r=='number')?_r:1000)+');';if(typeof _p=='string')_p=_p.split(',');for(var _v=0;_v<_p.length;_v++){if(typeof _p[_v]=='number'||typeof _p[_v]=='string')_s+=_t+Music.getNoteNumber(_p[_v])+_u;;}eval(_s);}function mo_playChord(_m,_n,_o,_c,_d,_e,_q,_r){this.playNotes(_m,_n,_o,mo_getChordNotes(_c,_d,_e),_q,_r);}Music.addPublicInstanceMethods('playChord','playNotes');Music.addPublicStaticMethods('getChordNotes');